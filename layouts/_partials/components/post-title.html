{{- $post := . }}
{{- $category := index ($post.GetTerms "categories") 0 }}
{{- $categorySlug := ($category.Name | urlize) }}
{{- $names := slice (printf "%s.png" ($post.Title | urlize)) "banner.png" }}
{{- $imagePath := false }}
{{- range $names }}
    {{- $testPath := (printf "/images/%s/%s" $categorySlug . ) }}
    {{- if fileExists (printf "static/%s" $testPath ) }}
        {{- $imagePath = $testPath }}
        {{- break }}
    {{- end }}
{{- end }}
{{- $dateMachine := $post.Date | time.Format "2006-01-02T15:04:05-07:00" }}
{{- $dateHuman := $post.Date | time.Format ":date_long" }}
<header{{ if $imagePath }} class="post-header post-header--banner" style="background-image: url({{ $imagePath }})"{{ else }} class="post-header"{{ end }}>
    <h2 class="post-subtitle">{{ $category.Name }}</h2>
    <h1 class="post-title">{{ $post.Title }}</h1>
    <nav class="post-meta" aria-labelledby="article-tags-navigation">
        <div class="post-timestamp"><time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time></div>
        <div class="post-tags">{{ partial "components/post-tags.html" (dict "taxonomy" "tags" "page" $post) }}</div>
    </nav>
</header>
